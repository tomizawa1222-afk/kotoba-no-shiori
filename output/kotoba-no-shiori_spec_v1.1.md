# 機能仕様書（Markdown版）：言葉の栞（ことばのしおり） v1.1

- ドキュメント番号: SPEC-KOTOBA-001
- バージョン: 1.1
- 作成日: 2026-01-17
- 作成者: プロダクト開発チーム

---

## 0. このドキュメントについて

### 0.1 目的
読書共有SNSアプリケーション「言葉の栞」の機能要件、デザインシステム、および技術仕様を定義する。  
本バージョン(v1.1)では、新しいデザインシステム（白黒ミニマル基調＋イエローグラデーション）を反映する。

### 0.2 今回の確認事項（ユーザー回答反映）
- **コメント機能**: MVPに含める
- **提供形態**: **モバイル（iOS/Android）＋Web 両方**
- **Web**: **Flutter Webで提供（OK）**
- **投稿の編集**: 可能
- **公開範囲の変更**: 可能
- **書籍API**: Google Books を主に利用（OK）

---

## 1. サービス概要

### 1.1 コンセプトとビジョン
**「心に刺さった一行を、誰かの道しるべに。」**

読書体験の中で出会う「言葉」に焦点を当てたSNS。  
感想文全体ではなく、特定の「刺さった表現」「心に残った文章」を栞（しおり）のように保存・共有することで、感性で繋がる読書コミュニティを創出する。

### 1.2 ターゲットユーザー
- **コアターゲット**: 20代〜30代の読書愛好家、デジタルネイティブ世代
- **インサイト**: Instagram/Xでは長文感想が投稿しづらい、読書専用の落ち着いた空間が欲しい、既存の読書管理アプリは事務的すぎる
- **行動特性**: “エモい”文章や歌詞を好む。Snapchat/Instagram Storiesのような直感的でビジュアル重視のUIに慣れている

### 1.3 価値提案（Value Proposition）
- **保存**: 読書メモを美しく、簡単にデジタル化して保存できる
- **発見**: 「本」単位ではなく「言葉」単位で新しい本と出会える
- **共感**: 同じ言葉に心を動かされた他者とのつながりを感じられる

### 1.4 デザインコンセプト
**「Minimal & Energetic」**

白と黒の静謐なミニマリズム（UPSTARインスパイア）を基調とし、  
イエロー→オレンジのグラデーション（Snapchat/Instagram Storiesインスパイア）をアクセントとして加える。

---

## 2. 機能一覧と開発ロードマップ（原文の表をMarkdown化）

| カテゴリー | MVP (初期リリース) | Phase 1 (機能拡張) | Phase 2 (コミュニティ化) |
|---|---|---|---|
| 認証・設定 | メール/SNSログイン、プロフィール編集 | 通知詳細設定、プライバシー設定拡充 | アカウント分析、データエクスポート |
| 投稿 | 引用文投稿、書籍検索(API)、ページ数記録、タグ付け | 画像添付(OCR機能)、下書き保存 | リッチテキスト編集、引用画像生成・シェア |
| 閲覧・発見 | タイムライン、キーワード検索、タグ検索 | トレンド表示、おすすめアルゴリズム | パーソナライズされたディスカバリーフィード |
| 交流 | いいね、フォロー、**コメント（返信あり）（※ユーザー回答によりMVPに追加）** | メンション | DM機能、読書会グループ |
| 本棚 | 読んだ本リスト | 読書ステータス管理（積読/読書中/読了） | 年間読書レポート、本棚の公開設定 |

---

## 3. コア機能詳細

### 3.1 投稿機能（Post / Quote）
ユーザーが書籍の特定箇所を引用し、感想を添えて投稿する。

- **書籍検索**: Google Books API等を利用し、タイトル・著者名・ISBNから書籍を特定。書影を自動取得。
- **引用入力**: テキストエリア（最大文字数制限あり）
- **ページ番号**: 出典ページを記録（任意）。信頼性の担保。
- **タグ付け**: `#人生 #恋愛 #ビジネス` などのトピックタグ
- **公開設定**: 公開 / フォロワー限定 / 非公開（自分用メモ）
- **UI挙動**: 投稿ボタンはアクセントカラー（グラデーション）で強調

#### 3.1.1 今回の決定事項（ユーザー回答）
- **投稿の編集**: 可能
- **公開範囲の変更**: 可能（投稿後に変更できる）

#### 3.1.2 未確定（決める必要あり）
- 引用本文の**最大文字数**
- 感想（キャプション/メモ）の最大文字数（引用と別フィールドにするか）
- 編集履歴（履歴を残す/残さない）
- 非公開投稿の扱い（検索に出るか、プロフィールに表示するか 等）

### 3.2 フィード機能（Feed）
フォロー中のユーザーおよびおすすめの投稿を閲覧するタイムライン。

- **カードデザイン**: 白背景に黒文字。書影サムネイル、引用文（サンセリフ体）、出典情報、ユーザー情報を1枚のカードに集約
- **インタラクション**: カード下部に「いいね（ハート）」「コメント（吹き出し）」アイコン。アクティブ時にイエローグラデーション
- **無限スクロール**: 快適な閲覧体験を提供

#### 3.2.1 コメント（MVP）
- **対象**: 投稿（Quote）に対してコメントを付けられる
- **返信**: **返信あり（スレッド）**
  - ルートコメント（親なし）と、返信コメント（親あり）を扱う
- **UI**: フィードカードのコメントアイコンからコメント一覧へ遷移（想定）

> 注: 具体的な並び順（新着/人気）や、編集/削除可否、通報導線は「未確定」に残す（要決定）。

### 3.3 プロフィール機能（Profile）
ユーザーの読書履歴とアイデンティティを表示。

- **ヘッダー**: アイコン、ユーザー名、自己紹介、フォロー/フォロワー数
- **統計**: 累計投稿数、お気に入り数、読了冊数の可視化
- **タブ切り替え**: 「投稿」「お気に入り」「本棚」を切り替え。アクティブタブはグラデーションラインで明示

### 3.4 検索機能（Search）
目的の言葉や本を探すための多角的検索。

- **カテゴリ検索**: 本、著者、タグ、ユーザー、引用文の全文検索
- **トレンドタグ**: 話題のハッシュタグをバブルUIで表示
- **サジェスト**: 入力中に候補を表示

---

## 4. UI/UXデザイン詳細

### 4.1 デザインシステム概要
視認性を最優先した白黒キャンバスに、行動（Action）と感情（Emotion）に関わる部分にのみ鮮やかなグラデーションを使用する。

### 4.2 カラーパレット
- **Primary**: `#000000`
- **Background**: `#FFFFFF`
- **Surface/Line**: `#F5F5F5`
- **Accent Gradient**: `linear-gradient(to right, #FFFC00, #FFA500)`
  - 使用箇所: 投稿ボタン、アクティブタブ、いいねアイコン（On）、リンクテキスト、ローディングインジケータ

### 4.3 タイポグラフィ
システムフォント（San Francisco / Roboto / Noto Sans JP）を使用し、OSネイティブな読みやすさを提供。

| 種別 | ウェイト | サイズ(SP) | 用途 |
|---|---|---:|---|
| Heading 1 | Bold | 24px | 画面タイトル |
| Heading 2 | Bold | 18px | セクション見出し、ユーザー名 |
| Body Large | Regular | 16px | 引用文本文（行間 1.6） |
| Body Medium | Regular | 14px | 一般的なテキスト、補足説明 |
| Caption | Regular | 12px | タイムスタンプ、メタ情報 |

### 4.4 主要コンポーネント
- **ボタン**: 角丸（Radius 8px〜12px）。プライマリアクションはグラデーション背景＋黒文字。セカンダリは黒ボーダー＋白背景。
- **入力フィールド**: 背景色 `#F5F5F5`、枠線なし、フォーカス時にグラデーションの下線。
- **ナビゲーションバー**: 下部固定、アイコンのみのミニマルデザイン。選択中のアイコンはグラデーションカラー。

---

## 5. 技術要件（原文の方針 + 補足）

### 5.1 システムアーキテクチャ概要（原文）
- **フロントエンド（Mobile App）**: Flutter または React Native
- **バックエンド**: Node.js (NestJS) または Go
- **データベース**:
  - RDBMS: PostgreSQL（ユーザー情報、書籍データ、リレーション）
  - NoSQL: Firestore または MongoDB（タイムライン、アクティビティログ）
- **インフラ**: AWS / GCP / Firebase
- **外部API**: Google Books API / OpenBD

#### 5.1.1 今回の決定事項（ユーザー回答）
- **フロントエンド**: **Flutter（モバイル＋Flutter Web）**

### 5.2 データベース設計（主要エンティティ：原文）
- **Users**: id, name, bio, avatar_url, settings
- **Books**: isbn, title, authors, cover_url, publisher
- **Quotes (Posts)**: id, user_id, book_id, content, page_number, privacy_level, created_at
- **Likes**: user_id, quote_id, created_at
- **Tags**: id, name, count

> 注: コメント機能をMVPに入れるため、`Comments` エンティティが追加で必要（返信あり）。

#### 5.2.1 追加エンティティ（MVP）
- **Comments**:
  - id
  - quote_id
  - user_id
  - content
  - parent_comment_id（返信の場合に使用。ルートコメントはnull）
  - created_at

### 5.3 セキュリティ・権利処理（原文）
**著作権に関する方針**: 「引用」の範囲内での利用を前提。投稿時に「出典（書名・著者名）」の入力を必須とし、短文投稿を推奨。著作権侵害の通報窓口を設置し、権利者からの削除要請に迅速対応。

- **認証**: Firebase Auth または Auth0
- **モデレーション**: NGワードフィルター。不適切コンテンツの通報機能。

---

## 6. 今後の展開とブランディング（原文）

### 6.1 ブランディングガイドライン
- **ロゴ**: 栞と引用符（""）をモチーフにした幾何学的シンボル。単色黒、またはグラデーションで使用。
- **トーン＆マナー**
  - Voice: 知的だが気取らない、共感的、現代的
  - Visual: 余白を恐れない、ノイズを排除、アクセントで感情を表現

### 6.2 マイルストーンとKPI（原文）
- **Launch (Month 0-3)**: コア機能の安定稼働、初期ユーザー獲得 / KPI: MAU 1,000、投稿継続率 20%
- **Growth (Month 4-12)**: コミュニティ機能強化、シェアでバイラル / KPI: MAU 50,000、平均滞在時間増

### 6.3 収益化モデル（Phase 2以降：原文）
- **アフィリエイト**: 引用元書籍の購入リンク（Amazon/楽天ブックス）
- **プレミアムプラン**: 広告非表示、高度分析、無制限非公開メモ、PC版利用権
- **出版社タイアップ**: 新刊プロモーション、公式アカウント運用

---

## 7. 追加で決めるべき項目（MVP実装のための不足情報）

### 7.1 仕様（重要）
- 投稿の**最大文字数**（引用本文 / 感想 / タグ / コメント）
- コメント仕様（**返信スレッド有無：あり（決定）**、削除/編集、通報、並び順）
- フィードの内訳（フォロー/おすすめのタブ、並び順、ページング）
- 検索の仕様（全文検索範囲、トレンド算出、サジェスト）
- プライバシーの詳細（鍵アカ有無、ブロック、ミュート）
- 通知（何を通知し、どこまで細かく設定するか）

### 7.2 技術（未経験でも決めやすいように）
- まずは「モバイル＋Web」を**1つのコードベースでやるか**（Flutter）/ **別で作るか**（React Native + Webは別途React等）
- バックエンドを自前で作るか（NestJS/Go）/ マネージド中心にするか（Firebase等）
- DBは1つに寄せるか（例: Firestore中心）/ 役割分担するか（Postgres + NoSQL）


